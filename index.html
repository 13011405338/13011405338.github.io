<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://xue-xinpeng.gitee.io/xuexinpeng/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/xuexinpeng/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/xuexinpeng/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/xuexinpeng/css/style.css">

  
    
<link rel="stylesheet" href="/xuexinpeng/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/xuexinpeng/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/xuexinpeng/">Home</a>
        
          <a class="main-nav-link" href="/xuexinpeng/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/xuexinpeng/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xue-xinpeng.gitee.io/xuexinpeng"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-webshell" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/02/03/webshell/" class="article-date">
  <time class="dt-published" datetime="2021-02-03T06:50:21.000Z" itemprop="datePublished">2021-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/02/03/webshell/">Webshell</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/02/03/webshell/" data-id="ckkpee2w30009esah93sp0gu3" data-title="Webshell" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-redis键空间" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/02/01/redis%E9%94%AE%E7%A9%BA%E9%97%B4/" class="article-date">
  <time class="dt-published" datetime="2021-02-01T06:50:21.000Z" itemprop="datePublished">2021-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/02/01/redis%E9%94%AE%E7%A9%BA%E9%97%B4/">Redis键空间事件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="键空间事件通知"><a href="#键空间事件通知" class="headerlink" title="键空间事件通知"></a>键空间事件通知</h2><hr>
<p>在Redis里面有一些事件，比如键到期、键被删除等。可以通过打开redis键空间事件通知来让 Redis 一旦触发这些事件的时候就往特定的Channel推一条消息</p>
<h2 id="键事件通知配置"><a href="#键事件通知配置" class="headerlink" title="键事件通知配置"></a>键事件通知配置</h2><hr>
<p>默认在redis中，键事件通知是不打开的，需要我们手动配置，具体的选项如下，默认他是个空字符串，代表关闭状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notify-keyspace-events &quot;&quot;</span><br></pre></td></tr></table></figure>
<h2 id="键空间"><a href="#键空间" class="headerlink" title="键空间"></a>键空间</h2><p>对于每个修改数据库的操作，键空间通知都会发送两种不同类型的事件<br>比如说，对0号数据库的键mykey执行DEL命令时， 系统将分发两条消息， 相当于执行以下两个PUBLISH命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PUBLISH __keyspace@0__:mykey del</span><br><span class="line">PUBLISH __keyevent@0__:del mykey</span><br></pre></td></tr></table></figure>
<p><strong>keyspace@0</strong>:mykey：接收0号数据库中所有修改键mykey的事件<br><strong>keyevent@0</strong>:del：接收0号数据库中所有执行del命令的键</p>
<h3 id="A输入"><a href="#A输入" class="headerlink" title="A输入"></a>A输入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config set notify-keyspace-events KEA</span><br><span class="line"></span><br><span class="line">psubscribe __key*@0__:*</span><br></pre></td></tr></table></figure>
<h3 id="B输入"><a href="#B输入" class="headerlink" title="B输入"></a>B输入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set msg &quot;hello&quot;</span><br><span class="line">del msg</span><br></pre></td></tr></table></figure>
<h3 id="A会打印"><a href="#A会打印" class="headerlink" title="A会打印"></a>A会打印</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;pmessage&quot;</span><br><span class="line">&quot;__key*@0__:*&quot;</span><br><span class="line">&quot;__keyspace@0__:msg&quot;</span><br><span class="line">&quot;set&quot;</span><br><span class="line">&quot;pmessage&quot;</span><br><span class="line">&quot;__key*@0__:*&quot;</span><br><span class="line">&quot;__keyevent@0__:set&quot;</span><br><span class="line">&quot;msg&quot;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/02/01/redis%E9%94%AE%E7%A9%BA%E9%97%B4/" data-id="ckkpee2vw0003esahdlgb7suc" data-title="Redis键空间事件" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-发布者订阅者" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/02/01/%E5%8F%91%E5%B8%83%E8%80%85%E8%AE%A2%E9%98%85%E8%80%85/" class="article-date">
  <time class="dt-published" datetime="2021-02-01T06:50:21.000Z" itemprop="datePublished">2021-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/02/01/%E5%8F%91%E5%B8%83%E8%80%85%E8%AE%A2%E9%98%85%E8%80%85/">Redis的发布和订阅</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Redis提供了发布订阅功能，可以用于消息的传输，Redis的发布订阅机制包括三个部分，发布者，订阅者和Channel。发布者和订阅者都是Redis客户端，Channel则为Redis服务器端，发布者将消息发送到某个的频道，订阅了这个频道的订阅者就能接收到这条消息。Redis的这种发布订阅机制与基于主题的发布订阅类似，Channel相当于主题。</p>
<h3 id="发布者"><a href="#发布者" class="headerlink" title="发布者:"></a>发布者:</h3><p>　　pub.py</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import redis</span><br><span class="line">conn &#x3D; redis.Redis(host&#x3D;&quot;127.0.0.1&quot;, port&#x3D;6379, decode_responses&#x3D;True)</span><br><span class="line">conn.publish(&quot;333&quot;, &quot;18&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="订阅者"><a href="#订阅者" class="headerlink" title="订阅者:"></a>订阅者:</h3><p>   sub.py</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import redis</span><br><span class="line"></span><br><span class="line">conn &#x3D; redis.Redis(host&#x3D;&quot;127.0.0.1&quot;, port&#x3D;6379, decode_responses&#x3D;True)</span><br><span class="line"></span><br><span class="line"># 第一步 生成一个订阅者对象</span><br><span class="line">pubsub &#x3D; conn.pubsub()</span><br><span class="line"></span><br><span class="line"># 第二步 订阅一个消息</span><br><span class="line"></span><br><span class="line">pubsub.subscribe(&quot;gaoxin333&quot;)</span><br><span class="line"></span><br><span class="line"># 创建一个接收</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    print(&quot;working~~~&quot;)</span><br><span class="line">    msg &#x3D; pubsub.parse_response()</span><br><span class="line">    print(msg)</span><br></pre></td></tr></table></figure>
<p>（1）发送消息<br>Redis采用PUBLISH命令发送消息，其返回值为接收到该消息的订阅者的数量。</p>
<p>（2）订阅某个频道 </p>
<p>Redis采用SUBSCRIBE命令订阅某个频道，其返回值包括客户端订阅的频道，目前已订阅的频道数量，以及接收到的消息，其中subscribe表示已经成功订阅了某个频道。</p>
<p>（3）模式匹配 </p>
<p>模式匹配功能允许客户端订阅符合某个模式的频道，Redis采用PSUBSCRIBE订阅符合某个模式所有频道，用“”表示模式，“”可以被任意值代替。假设客户端同时订阅了某种模式和符合该模式的某个频道，那么发送给这个频道的消息将被客户端接收到两次，只不过这两条消息的类型不同，一个是message类型，一个是pmessage类型，但其内容相同。 </p>
<p>（4）取消订阅<br>Redis采用UNSUBSCRIBE和PUNSUBSCRIBE命令取消订阅，其返回值与订阅类似。<br>由于Redis的订阅操作是阻塞式的，因此一旦客户端订阅了某个频道或模式，就将会一直处于订阅状态直到退出。在SUBSCRIBE，PSUBSCRIBE，UNSUBSCRIBE和PUNSUBSCRIBE命令中，其返回值都包含了该客户端当前订阅的频道和模式的数量，当这个数量变为0时，该客户端会自动退出订阅状态。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/02/01/%E5%8F%91%E5%B8%83%E8%80%85%E8%AE%A2%E9%98%85%E8%80%85/" data-id="ckkpee2wb000kesah44ckhykx" data-title="Redis的发布和订阅" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-axios封装" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/29/axios%E5%B0%81%E8%A3%85/" class="article-date">
  <time class="dt-published" datetime="2021-01-29T10:28:43.000Z" itemprop="datePublished">2021-01-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/29/axios%E5%B0%81%E8%A3%85/">vue axios封装</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="新建一个http的文件夹-里面有两个文件-一个api-js-一个index-js"><a href="#新建一个http的文件夹-里面有两个文件-一个api-js-一个index-js" class="headerlink" title="新建一个http的文件夹 里面有两个文件 一个api.js  一个index.js"></a>新建一个http的文件夹 里面有两个文件 一个api.js  一个index.js</h3><h3 id="index-js文件-用于写axios的封装"><a href="#index-js文件-用于写axios的封装" class="headerlink" title="index.js文件 用于写axios的封装"></a>index.js文件 用于写axios的封装</h3><p>要先定义新的axios</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const axios &#x3D; require(&#39;axios&#39;)</span><br></pre></td></tr></table></figure>
<h3 id="get的封装-params是携带的参数"><a href="#get的封装-params是携带的参数" class="headerlink" title="get的封装  params是携带的参数"></a>get的封装  params是携带的参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export function get(url, params, headers) &#123;</span><br><span class="line">  return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">    axios.get(url, &#123;params, headers&#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      resolve(res)</span><br><span class="line">    &#125;).catch(err &#x3D;&gt; &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="post的封装"><a href="#post的封装" class="headerlink" title="post的封装"></a>post的封装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export function post(url, params, headers) &#123;</span><br><span class="line">  return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">    axios.post(url, params, headers).then((res) &#x3D;&gt; &#123;</span><br><span class="line">      resolve(res)</span><br><span class="line">    &#125;).catch((err) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; debugger</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="api-js-用于写接口-要先引入-index-js"><a href="#api-js-用于写接口-要先引入-index-js" class="headerlink" title="api.js 用于写接口  要先引入 index.js"></a>api.js 用于写接口  要先引入 index.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123;get, post, put, del&#125; from &#39;.&#x2F;index&#39;</span><br><span class="line"></span><br><span class="line">export const signUp &#x3D; parameter &#x3D;&gt; &#123;</span><br><span class="line">  return post(</span><br><span class="line">    &#39;signup&#x2F;&#39;,</span><br><span class="line">    parameter,</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/29/axios%E5%B0%81%E8%A3%85/" data-id="ckkpee2uv0000esahgeesey8z" data-title="vue axios封装" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-celery" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/29/celery/" class="article-date">
  <time class="dt-published" datetime="2021-01-29T10:28:43.000Z" itemprop="datePublished">2021-01-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/29/celery/">celery异步框架</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="这是使用celery异步发送短信的方法"><a href="#这是使用celery异步发送短信的方法" class="headerlink" title="这是使用celery异步发送短信的方法"></a>这是使用celery异步发送短信的方法</h2><h2 id="安装celery以及redis"><a href="#安装celery以及redis" class="headerlink" title="安装celery以及redis"></a>安装celery以及redis</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install celery&#x3D;&#x3D;3.1.2</span><br><span class="line">pip install redis&#x3D;&#x3D;2.1.6</span><br></pre></td></tr></table></figure>
<h2 id="在setting中配置celery"><a href="#在setting中配置celery" class="headerlink" title="在setting中配置celery"></a>在setting中配置celery</h2><p><img src="https://i.loli.net/2021/01/30/aVxySodZzXDBLsb.jpg"></p>
<h2 id="配置broker消息队列的地址-我是在setting中配置的"><a href="#配置broker消息队列的地址-我是在setting中配置的" class="headerlink" title="配置broker消息队列的地址(我是在setting中配置的)"></a>配置broker消息队列的地址(我是在setting中配置的)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import djcelery</span><br><span class="line">djcelery.setup_loader()</span><br><span class="line">BROKER_URL &#x3D; &#39;redis:&#x2F;&#x2F;123.57.61.168:6379&#39;</span><br></pre></td></tr></table></figure>
<h2 id="创建一个tasks-py的文件-写异步代码"><a href="#创建一个tasks-py的文件-写异步代码" class="headerlink" title="创建一个tasks.py的文件 写异步代码"></a>创建一个tasks.py的文件 写异步代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">from celery.task import task</span><br><span class="line">from ronglian_sms_sdk import SmsSDK</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"># 这是发送短信的服务部分</span><br><span class="line">ACCOUNT_SID &#x3D; &#39;&#39;</span><br><span class="line">AUTH_TOKEN &#x3D; &#39;&#39;</span><br><span class="line">APP_ID &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line">def sdk(ACCOUNT_SID, AUTH_TOKEN, APP_ID):</span><br><span class="line">    return SmsSDK(ACCOUNT_SID, AUTH_TOKEN, APP_ID)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@task  # 升级为异步的标志</span><br><span class="line">def send(sms, tid&#x3D;1, mobile&#x3D;[], datas&#x3D;[]):</span><br><span class="line">    # time.sleep(5)</span><br><span class="line">    tid &#x3D; tid  # 登录验证模版 默认ID为1</span><br><span class="line">    mobile &#x3D; &#39;,&#39;.join(mobile) if len(mobile) &gt; 1 else mobile[0]  # 接收的手机号列表</span><br><span class="line">    datas &#x3D; datas</span><br><span class="line">    sms.sendMessage(tid, mobile, datas)</span><br></pre></td></tr></table></figure>
<h2 id="接下来就可以在view中发送短信了"><a href="#接下来就可以在view中发送短信了" class="headerlink" title="接下来就可以在view中发送短信了"></a>接下来就可以在view中发送短信了</h2><p>send.delay 发送短信</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sms &#x3D; sdk(ACCOUNT_SID, AUTH_TOKEN, APP_ID)</span><br><span class="line">a &#x3D; random.sample([str(i) for i in range(10)], 6)</span><br><span class="line">code &#x3D; &#39;&#39;.join(a)</span><br><span class="line">r.set(phone, code, 60)</span><br><span class="line">datas &#x3D; [code, &#39;60s&#39;]</span><br><span class="line">send.delay(sms, mobile&#x3D;[phone], datas&#x3D;datas)</span><br><span class="line"># 直接加入消息队列，由celery去管理</span><br></pre></td></tr></table></figure>
<h2 id="需要运行两个终端-一个程序-一个异步的终端"><a href="#需要运行两个终端-一个程序-一个异步的终端" class="headerlink" title="需要运行两个终端 一个程序 一个异步的终端"></a>需要运行两个终端 一个程序 一个异步的终端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py manage.py celery worker</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/29/celery/" data-id="ckkpee2vm0001esah83j56e1m" data-title="celery异步框架" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-三方支付" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/29/%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/" class="article-date">
  <time class="dt-published" datetime="2021-01-29T10:28:43.000Z" itemprop="datePublished">2021-01-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/29/%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/">三方支付</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-安装-pip-install-python-alipay-sdk"><a href="#1-安装-pip-install-python-alipay-sdk" class="headerlink" title="1.安装 pip install python-alipay-sdk"></a>1.安装 pip install python-alipay-sdk</h2><h2 id="2-支付宝沙箱地址"><a href="#2-支付宝沙箱地址" class="headerlink" title="2. 支付宝沙箱地址"></a>2. 支付宝沙箱地址</h2><p><a target="_blank" rel="noopener" href="https://openhome.alipay.com/platform/appDaily.htm?tab=info">https://openhome.alipay.com/platform/appDaily.htm?tab=info</a><br><img src="https://i.loli.net/2021/01/29/2ebCSJ4Zwj7HfWB.jpg"><br>下一步<br><img src="https://i.loli.net/2021/01/29/qnoZ9uShQBHyevX.jpg"><br>下一步<br><img src="https://i.loli.net/2021/01/29/cAoBjXWNpL9xSn1.jpg"></p>
<h2 id="支付宝开发平台开发助手"><a href="#支付宝开发平台开发助手" class="headerlink" title="支付宝开发平台开发助手"></a>支付宝开发平台开发助手</h2><p><img src="https://i.loli.net/2021/01/29/MQdEYWpemur7T4R.jpg"></p>
<h2 id="下载支付宝开放平台开发助手地址"><a href="#下载支付宝开放平台开发助手地址" class="headerlink" title="下载支付宝开放平台开发助手地址:"></a>下载支付宝开放平台开发助手地址:</h2><p><a target="_blank" rel="noopener" href="http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_win.zip">http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_win.zip</a></p>
<p>private.txt放置私钥</p>
<p>public.txt放置应用公钥</p>
<p>在python中配置好你的公钥 私钥<br><img src="https://i.loli.net/2021/01/29/SB35A1xj7DgYWV4.jpg"></p>
<p>配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app_private_key_string &#x3D; open(os.path.join(key_dir, &quot;app_private_key.pem&quot;)).read()</span><br><span class="line">alipay_public_key_string &#x3D; open(os.path.join(key_dir, &quot;alipay_public_key.pem&quot;)).read()</span><br><span class="line"></span><br><span class="line">alipay &#x3D; AliPay(</span><br><span class="line">    appid&#x3D;2016093000630420,</span><br><span class="line">    app_notify_url&#x3D;None,  # 默认回调url</span><br><span class="line">    # 我的私钥</span><br><span class="line">    app_private_key_string&#x3D;app_private_key_string,  # 支付宝公钥</span><br><span class="line">    alipay_public_key_string&#x3D;alipay_public_key_string,</span><br><span class="line">    sign_type&#x3D;&quot;RSA2&quot;,</span><br><span class="line">    debug&#x3D;True,  # 打开调试模式</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>电脑支付</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class AliPayView(APIView):</span><br><span class="line">    def post(self, request):</span><br><span class="line">        order_string &#x3D; alipay.api_alipay_trade_page_pay(</span><br><span class="line">            subject&#x3D;&quot;&quot;,  # 支付的对象</span><br><span class="line">            out_trade_no&#x3D; 0, # 订单，</span><br><span class="line">            total_amount&#x3D;0 , # 支付的钱数 订单总金额</span><br><span class="line">            return_url&#x3D;&quot;&quot;,  # 支付回调的页面</span><br><span class="line">            notify_url&#x3D;&quot;&quot;,</span><br><span class="line">        )</span><br><span class="line">        BASE_URL &#x3D; &quot;https:&#x2F;&#x2F;openapi.alipaydev.com&#x2F;gateway.do?&quot;</span><br><span class="line">        # 构建支付链接</span><br><span class="line">        return Response(</span><br><span class="line">            &#123;</span><br><span class="line">                &#39;alipay_url&#39;: BASE_URL + order_string,</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/29/%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98/" data-id="ckkpee2w7000desah6qro0lqv" data-title="三方支付" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-三方登陆" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/28/%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86/" class="article-date">
  <time class="dt-published" datetime="2021-01-28T06:50:21.000Z" itemprop="datePublished">2021-01-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/28/%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86/">微博三方登陆</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="首先-先去微博开发平台-注册账号"><a href="#首先-先去微博开发平台-注册账号" class="headerlink" title="首先,先去微博开发平台 注册账号"></a>首先,先去微博开发平台 注册账号</h3><p>微连接  —  网站接入  获取App Key， App Secret  在设置一个回调地址 这些都是要自己记住的 不要让别人知道</p>
<h3 id="在setting中设置App-Key，-App-Secret-和回调地址"><a href="#在setting中设置App-Key，-App-Secret-和回调地址" class="headerlink" title="在setting中设置App Key， App Secret 和回调地址"></a>在setting中设置App Key， App Secret 和回调地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WEIBO_APP_KEY &#x3D; &#39;&#39;  # App Key</span><br><span class="line">WEIBO_APP_SECRET &#x3D; &#39;&#39;  # App Secret</span><br><span class="line">WEIBO_REDIRECT_URL &#x3D; &#39;&#39;  # 回调地址</span><br></pre></td></tr></table></figure>
<p>生成微博登陆地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class GetWEIBOurl(APIView):</span><br><span class="line">    # 生成微博的登陆地址</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return Response(WEIBO_URL % (WEIBO_APP_KEY, WEIBO_REDIRECT_URL))</span><br></pre></td></tr></table></figure>
<p>微博会返回你一个code值 判断是否存在数据库 没有就是新用户 可以绑定到自己的账户,绑定的直接登陆即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">class GetWeiboToken(APIView):</span><br><span class="line"></span><br><span class="line">    def get(self, request, code):</span><br><span class="line">        data &#x3D; &#123;</span><br><span class="line">            &#39;client_id&#39;: WEIBO_APP_KEY,</span><br><span class="line">            &#39;client_secret&#39;: WEIBO_APP_SECRET,</span><br><span class="line">            &#39;grant_type&#39;: &#39;authorization_code&#39;,</span><br><span class="line">            &#39;code&#39;: code,</span><br><span class="line">            &#39;redirect_uri&#39;: WEIBO_REDIRECT_URL</span><br><span class="line">        &#125;</span><br><span class="line">        url &#x3D; &#39;https:&#x2F;&#x2F;api.weibo.com&#x2F;oauth2&#x2F;access_token&#39;</span><br><span class="line">        req &#x3D; requests.post(url, data&#x3D;data).text</span><br><span class="line">        uid &#x3D; json.loads(req).get(&#39;uid&#39;)</span><br><span class="line">        if not uid:</span><br><span class="line">            return Response(&#123;</span><br><span class="line">                &#39;code&#39;: 500,</span><br><span class="line">                &#39;msg&#39;: &#39;请重新扫码&#39;</span><br><span class="line">            &#125;)</span><br><span class="line">        try:</span><br><span class="line">            weibo &#x3D; WeiBo.objects.get(uid&#x3D;uid)</span><br><span class="line">        except:</span><br><span class="line">            # 没有在平台中绑定，需要绑定一下</span><br><span class="line">            return Response(&#123;</span><br><span class="line">                &#39;code&#39;: 404,</span><br><span class="line">                &#39;uid&#39;: uid,</span><br><span class="line">            &#125;)</span><br><span class="line">        else:</span><br><span class="line">            # 这个用户是三方绑定过的，直接可以登陆</span><br><span class="line">            user &#x3D; weibo.user</span><br><span class="line">            pa &#x3D; &#123;</span><br><span class="line">                &#39;exp&#39;: datetime.datetime.utcnow() + datetime.timedelta(hours&#x3D;1),</span><br><span class="line">                &#39;user_id&#39;: user.id,</span><br><span class="line">            &#125;</span><br><span class="line">            token &#x3D; jwt.encode(payload&#x3D;pa, key&#x3D;&#39;abc&#39;)</span><br><span class="line">            return Response(&#123;</span><br><span class="line">                &#39;code&#39;: 200,</span><br><span class="line">                &#39;token&#39;: token,</span><br><span class="line">                &#39;user_name&#39;: user.username,</span><br><span class="line">                &#39;user_phone&#39;: user.phone,</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/28/%E4%B8%89%E6%96%B9%E7%99%BB%E9%99%86/" data-id="ckkpee2w8000fesahbhyge9tv" data-title="微博三方登陆" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue父子组件传参" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/27/vue%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82/" class="article-date">
  <time class="dt-published" datetime="2021-01-27T06:55:21.000Z" itemprop="datePublished">2021-01-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/27/vue%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82/">vue父子组件传参</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="vue中经常用到组件-组件的好处是"><a href="#vue中经常用到组件-组件的好处是" class="headerlink" title="vue中经常用到组件,组件的好处是"></a>vue中经常用到组件,组件的好处是</h2><p>1、如果有一个功能很多地方都会用到，写成一个组件就不用重复写这个功能了；<br>2、页面内容会简洁一些；方便管控；</p>
<p>这个是父子组件传参的两种方法</p>
<h2 id="第一种-使用props"><a href="#第一种-使用props" class="headerlink" title="第一种 使用props"></a>第一种 使用props</h2><p>父页面：parent.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div class&#x3D;&quot;sidebar_contianer&quot;&gt;</span><br><span class="line">         &lt;sidebar-item :routerData&#x3D;&quot;transmitData&quot;&gt;&lt;&#x2F;sidebar-item&gt;</span><br><span class="line">     &lt;&#x2F;div&gt;</span><br><span class="line"> &lt;&#x2F;template&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line"> import sidebarItem from &#39;.&#x2F;sidebarItem&#39;</span><br><span class="line"> export default &#123;</span><br><span class="line">     data()&#123;</span><br><span class="line">         return&#123;</span><br><span class="line">             transmitData:&#123;</span><br><span class="line">                 title:&#39;首页&#39;,</span><br><span class="line">                 uuid:&#39;123&#39;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     components:&#123;</span><br><span class="line">         sidebarItem</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>第一步：用import引入子组件</p>
<p>第二步：在components中注入子组件</p>
<p>第三步：在子组件中定义一个指令:routerData=”transmitData”  （routerData名称需要和子组件中的props保持一致,transmitData是要传递给子组件的数据）</p>
<p>子页面：child.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">     name:&#39;sidebarItem&#39;,</span><br><span class="line">     props:&#123;</span><br><span class="line">         transmitData:&#123;</span><br><span class="line">             type:Object,</span><br><span class="line">             default:null</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>第四步：在子组件中定义props属性，transmitData的type可以自定义类型（但是必须和父组件中的数据类型一致，否则会报错），default是默认值</p>
<h2 id="第二种使用-emit"><a href="#第二种使用-emit" class="headerlink" title="第二种使用$emit"></a>第二种使用$emit</h2><p>子页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt; </span><br><span class="line">    &lt;div class&#x3D;&quot;testCom&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;message&quot; &#x2F;&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;click&quot;&gt;发送消息给父组件&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          message: &#39;我是来自子组件的消息&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      click() &#123;</span><br><span class="line">            &#x2F;&#x2F;1、childFn 组件方法名，父组件中用childFn方法接收子组件中的数据；2、message是传递给父组件的数据</span><br><span class="line">            this.$emit(&#39;childFn&#39;, this.message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>第一步：this.$emit(“方法名”,”传递给父组件的数据”)</p>
<p>父页面：b.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;child-com @childFn&#x3D;&quot;parentFn&quot;&gt;&lt;&#x2F;child-com&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">    data: &#123;</span><br><span class="line">        message: &#39;&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">       parentFn(childData) &#123;</span><br><span class="line">        this.message &#x3D; childData;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>第二步：父组件中注入子组件（此处代码中省略，如要参考请看情况一）</p>
<p>第三步：定义方法childFn（必须和子组件中方法名一致），parentFn定义可随意。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/27/vue%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82/" data-id="ckkpee2vx0004esaha4jed6tm" data-title="vue父子组件传参" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue路由钩子" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/26/vue%E8%B7%AF%E7%94%B1%E9%92%A9%E5%AD%90/" class="article-date">
  <time class="dt-published" datetime="2021-01-26T06:59:21.000Z" itemprop="datePublished">2021-01-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xuexinpeng/categories/GIT/">GIT</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/26/vue%E8%B7%AF%E7%94%B1%E9%92%A9%E5%AD%90/">vue路由钩子</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="路由钩子"><a href="#路由钩子" class="headerlink" title="路由钩子"></a>路由钩子</h2><p>在某些情况下，当路由跳转前或跳转后、进入、离开某一个路由前、后，需要做某些操作，就可以使用路由钩子来监听路由的变化<br>全局路由钩子：router.beforeEach 注册一个全局前置守卫</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to, from, next) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F;会在任意路由跳转前执行，next一定要记着执行，不然路由不能跳转了</span><br><span class="line">  console.log(&#39;beforeEach&#39;)</span><br><span class="line">  console.log(to,from)</span><br><span class="line">  &#x2F;&#x2F;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">router.afterEach((to, from) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F;会在任意路由跳转后执行</span><br><span class="line">  console.log(&#39;afterEach&#39;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>单个路由钩子：<br>只有beforeEnter，在进入前执行，to参数就是当前路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">routes: [</span><br><span class="line">   &#123;</span><br><span class="line">     path: &#39;&#x2F;foo&#39;,</span><br><span class="line">     component: Foo,</span><br><span class="line">     beforeEnter: (to, from, next) &#x3D;&gt; &#123;</span><br><span class="line">       &#x2F;&#x2F; ...</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/26/vue%E8%B7%AF%E7%94%B1%E9%92%A9%E5%AD%90/" data-id="ckkpee2w10007esahg28r6b1g" data-title="vue路由钩子" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/xuexinpeng/2021/01/25/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-01-25T09:32:16.476Z" itemprop="datePublished">2021-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/xuexinpeng/2021/01/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xue-xinpeng.gitee.io/xuexinpeng/2021/01/25/hello-world/" data-id="ckkpee2vo0002esahe54v8lr0" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/xuexinpeng/page/2/">2</a><a class="extend next" rel="next" href="/xuexinpeng/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/xuexinpeng/categories/GIT/">GIT</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/xuexinpeng/tags/GIT/" rel="tag">GIT</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/xuexinpeng/tags/GIT/" style="font-size: 10px;">GIT</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/xuexinpeng/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xuexinpeng/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/xuexinpeng/2021/02/03/webshell/">Webshell</a>
          </li>
        
          <li>
            <a href="/xuexinpeng/2021/02/01/redis%E9%94%AE%E7%A9%BA%E9%97%B4/">Redis键空间事件</a>
          </li>
        
          <li>
            <a href="/xuexinpeng/2021/02/01/%E5%8F%91%E5%B8%83%E8%80%85%E8%AE%A2%E9%98%85%E8%80%85/">Redis的发布和订阅</a>
          </li>
        
          <li>
            <a href="/xuexinpeng/2021/01/29/axios%E5%B0%81%E8%A3%85/">vue axios封装</a>
          </li>
        
          <li>
            <a href="/xuexinpeng/2021/01/29/celery/">celery异步框架</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/xuexinpeng/" class="mobile-nav-link">Home</a>
  
    <a href="/xuexinpeng/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/xuexinpeng/js/jquery-3.4.1.min.js"></script>



  
<script src="/xuexinpeng/fancybox/jquery.fancybox.min.js"></script>




<script src="/xuexinpeng/js/script.js"></script>





  </div>
</body>
</html>